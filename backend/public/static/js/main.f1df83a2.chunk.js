(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){e.exports=n(54)},46:function(e,t,n){},47:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),l=(n(46),n(47),n(12)),u=n(7),s=n(9),i="api/v1/",m=r.a.createContext();function E(e){var t=r.a.useState([]),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(!1),l=Object(s.a)(c,2),u=l[0],E=l[1],d=r.a.useState(""),h=Object(s.a)(d,2),f=h[0],p=h[1];return r.a.createElement(m.Provider,{value:{users:a,loggedIn:u,checkUser:function(e,t){var n=!1;return fetch("".concat("").concat(i,"login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.toLowerCase(),password:t})}).then((function(e){if(!e.ok)throw new Error("Login Error");return e.json()})).then((function(e){console.log(e),e.hasOwnProperty("authenticated")&&(E(e.authenticated),!0===e.authenticated&&p(e.token),n=e.authenticated)})).catch((function(e){console.log("failed")})),n},setUsers:o,token:f}},e.children)}var d=m.Consumer,h=n(8),f=n(6);function p(e){var t=r.a.useState(""),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(""),u=Object(s.a)(c,2),i=u[0],E=u[1],p=r.a.useContext(m).checkUser;return r.a.createElement("div",null,r.a.createElement(d,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Log In"),r.a.createElement(f.a,null,r.a.createElement(f.a.Group,{controlId:"loginUsername"},r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),o(e.target.value)},value:a})),r.a.createElement(f.a.Group,{controlId:"loginPassword"},r.a.createElement(f.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),E(e.target.value)},value:i})),r.a.createElement(h.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),p(a,i)}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(h.a,{variant:"outline-secondary"},"Home")))}function g(e){var t=r.a.useState(""),n=Object(s.a)(t,2),o=n[0],c=n[1],u=r.a.useState(""),E=Object(s.a)(u,2),p=E[0],g=E[1],v=Object(a.useContext)(m).token;return r.a.createElement("div",null,r.a.createElement(d,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Sign Up"),r.a.createElement(f.a,null,r.a.createElement(f.a.Group,{controlId:"signUpUsername"},r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),c(e.target.value)},value:o})),r.a.createElement(f.a.Group,{controlId:"signUpPassword"},r.a.createElement(f.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:p})),r.a.createElement(h.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault();try{!function(e,t,n){console.log(n),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(t){if(!t.ok)throw new Error("Error with POST at ".concat(e));return t.json()})).catch((function(e){throw e}))}("".concat("").concat(i,"users"),v,{username:o,password:p}),console.log("added")}catch(t){console.log(t.message)}}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(h.a,{variant:"outline-secondary"},"Home")))}var v=n(19);function w(e){var t=r.a.useContext(m).users;return r.a.createElement("div",null,r.a.createElement(d,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Welcome to the Home Page"),r.a.createElement(l.b,{to:"/login"},r.a.createElement(h.a,{variant:"outline-danger"},"Login")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/signup"},r.a.createElement(h.a,{variant:"outline-warning"},"Sign Up")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/forgot"},r.a.createElement(h.a,{variant:"outline-success"},"Forgot Password?")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/admin"},r.a.createElement(h.a,{variant:"outline-info"},"Edit Users")),t.map((function(t){return r.a.createElement(v.a,{body:!0,key:e.user._id},e.user.username)})))}function b(e){var t=r.a.useState(""),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(""),u=Object(s.a)(c,2),m=u[0],E=u[1];return r.a.createElement("div",null,r.a.createElement(d,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Forgot Password?"),r.a.createElement(f.a,null,r.a.createElement(f.a.Group,{controlId:"forgotUsername"},r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),o(e.target.value)},value:a})),r.a.createElement(f.a.Group,{controlId:"forgotPassword"},r.a.createElement(f.a.Control,{type:"password",placeholder:"New Password",onChange:function(e){e.preventDefault(),E(e.target.value)},value:m})),r.a.createElement(h.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault();try{t="".concat("").concat(i,"users/").concat(a),n={password:m},fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("Error with PATCH at ".concat(t));return e.json()})).catch((function(e){throw e})),console.log("Patched")}catch(r){console.log(r.message)}var t,n}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(h.a,{variant:"outline-secondary"},"Home")))}var y=n(40);function C(e){var t=e.component,n=Object(y.a)(e,["component"]);return r.a.createElement("div",null,r.a.createElement(d,null,(function(e){var a=e.loggedIn;return r.a.createElement(u.b,Object.assign({render:function(e){return a?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/"})}},n))})),r.a.createElement(l.b,{to:"/"},r.a.createElement(h.a,{variant:"outline-secondary"},"Home")))}var j=n(22);function O(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(e.user.username),u=Object(s.a)(l,2),m=u[0],E=u[1],d=Object(a.useState)(e.user.password),p=Object(s.a)(d,2),g=p[0],v=p[1],w=function(){return c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return c(!0)}},"Edit"),r.a.createElement(j.a,{show:o,onHide:w},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Change info for ",e.user.fName)),r.a.createElement(j.a.Body,null,r.a.createElement(f.a,null,r.a.createElement(f.a.Group,{controlId:"editUserModalUsername"},r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter Username",value:m,onChange:function(e){e.preventDefault(),E(e.target.value)},readOnly:!0})),r.a.createElement(f.a.Group,{controlId:"editUserModalPassword"},r.a.createElement(f.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),v(e.target.value)}})))),r.a.createElement(j.a.Footer,null,r.a.createElement(h.a,{variant:"outline-dark",onClick:w},"Cancel"),r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(t){t.preventDefault();try{n="".concat("").concat(i,"users/").concat(e.user.username),a={username:m,password:g},fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(!e.ok)throw new Error("Error with PUT at ".concat(n));return e.json()})).catch((function(e){throw e})),console.log("updated")}catch(r){console.log(r.message)}var n,a;c(!1),e.refresh()}},"Save Changes"))))}function k(e){return r.a.createElement("div",null,r.a.createElement(v.a,{style:{width:"18rem"}},r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Title,null,e.user.username),r.a.createElement(v.a.Text,null,"".concat(e.user.fName," ").concat(e.user.lName)),r.a.createElement(O,{user:e.user,refresh:e.refresh}),r.a.createElement(h.a,{variant:"outline-danger",onClick:function(){var t;(t="".concat("").concat(i,"users/").concat(e.user.username),e.user,fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error with DELETE at ".concat(t));return e.json()})).catch((function(e){throw e}))).then((function(t){e.refresh()})).catch((function(e){console.log(e.message)}))}},"Delete"))))}function S(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),o=n[0],c=n[1],l=function(){var e;(e="".concat("").concat(i,"users"),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Error with GET at ".concat(e));return t.json()})).catch((function(e){throw e}))).then((function(e){c(e)})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),o.map((function(e){return r.a.createElement(k,{key:e._id,user:e,refresh:l})})))}function I(){return r.a.createElement(E,null,r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/signup",component:g}),r.a.createElement(u.b,{path:"/login",component:p}),r.a.createElement(u.b,{path:"/forgot",component:b}),r.a.createElement(C,{path:"/admin",component:S}),r.a.createElement(u.b,{path:"/",component:w}))))}var P=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.f1df83a2.chunk.js.map