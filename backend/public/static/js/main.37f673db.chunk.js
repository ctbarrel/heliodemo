(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){e.exports=n(54)},46:function(e,t,n){},47:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),l=(n(46),n(47),n(12)),u=n(7),s=n(9),i="https://ctbheliodemo.herokuapp.com/",m="api/v1/",E=r.a.createContext();function d(e){var t=r.a.useState([]),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],h=r.a.useState(""),f=Object(s.a)(h,2),p=f[0],g=f[1];return r.a.createElement(E.Provider,{value:{users:a,loggedIn:u,checkUser:function(e,t){var n=!1;return fetch("".concat(i).concat(m,"login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.toLowerCase(),password:t})}).then((function(e){if(!e.ok)throw new Error("Login Error");return e.json()})).then((function(e){console.log(e),e.hasOwnProperty("authenticated")&&(d(e.authenticated),!0===e.authenticated&&g(e.token),n=e.authenticated)})).catch((function(e){console.log("failed")})),n},setUsers:o,token:p}},e.children)}var h=E.Consumer,f=n(8),p=n(6);function g(e){var t=r.a.useState(""),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(""),u=Object(s.a)(c,2),i=u[0],m=u[1],d=r.a.useContext(E).checkUser;return r.a.createElement("div",null,r.a.createElement(h,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Log In"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"loginUsername"},r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),o(e.target.value)},value:a})),r.a.createElement(p.a.Group,{controlId:"loginPassword"},r.a.createElement(p.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),m(e.target.value)},value:i})),r.a.createElement(f.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault(),d(a,i)}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(f.a,{variant:"outline-secondary"},"Home")))}function v(e){var t=r.a.useState(""),n=Object(s.a)(t,2),o=n[0],c=n[1],u=r.a.useState(""),d=Object(s.a)(u,2),g=d[0],v=d[1],w=Object(a.useContext)(E).token;return r.a.createElement("div",null,r.a.createElement(h,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Sign Up"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"signUpUsername"},r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),c(e.target.value)},value:o})),r.a.createElement(p.a.Group,{controlId:"signUpPassword"},r.a.createElement(p.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),v(e.target.value)},value:g})),r.a.createElement(f.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault();try{!function(e,t,n){console.log(n),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then((function(t){if(!t.ok)throw new Error("Error with POST at ".concat(e));return t.json()})).catch((function(e){throw e}))}("".concat(i).concat(m,"users"),w,{username:o,password:g}),console.log("added")}catch(t){console.log(t.message)}}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(f.a,{variant:"outline-secondary"},"Home")))}var w=n(19);function b(e){var t=r.a.useContext(E).users;return r.a.createElement("div",null,r.a.createElement(h,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Welcome to the Home Page"),r.a.createElement(l.b,{to:"/login"},r.a.createElement(f.a,{variant:"outline-danger"},"Login")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/signup"},r.a.createElement(f.a,{variant:"outline-warning"},"Sign Up")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/forgot"},r.a.createElement(f.a,{variant:"outline-success"},"Forgot Password?")),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/admin"},r.a.createElement(f.a,{variant:"outline-info"},"Edit Users")),t.map((function(t){return r.a.createElement(w.a,{body:!0,key:e.user._id},e.user.username)})))}function y(e){var t=r.a.useState(""),n=Object(s.a)(t,2),a=n[0],o=n[1],c=r.a.useState(""),u=Object(s.a)(c,2),E=u[0],d=u[1];return r.a.createElement("div",null,r.a.createElement(h,null,(function(e){return e.loggedIn?r.a.createElement("h3",null,"Logged In"):r.a.createElement("h3",null,"Not Logged In")})),r.a.createElement("h1",null,"Forgot Password?"),r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"forgotUsername"},r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter username",onChange:function(e){e.preventDefault(),o(e.target.value)},value:a})),r.a.createElement(p.a.Group,{controlId:"forgotPassword"},r.a.createElement(p.a.Control,{type:"password",placeholder:"New Password",onChange:function(e){e.preventDefault(),d(e.target.value)},value:E})),r.a.createElement(f.a,{variant:"outline-dark",type:"submit",onClick:function(e){e.preventDefault();try{t="".concat(i).concat(m,"users/").concat(a),n={password:E},fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("Error with PATCH at ".concat(t));return e.json()})).catch((function(e){throw e})),console.log("Patched")}catch(r){console.log(r.message)}var t,n}},"Submit")),r.a.createElement(l.b,{to:"/"},r.a.createElement(f.a,{variant:"outline-secondary"},"Home")))}var C=n(40);function j(e){var t=e.component,n=Object(C.a)(e,["component"]);return r.a.createElement("div",null,r.a.createElement(h,null,(function(e){var a=e.loggedIn;return r.a.createElement(u.b,Object.assign({render:function(e){return a?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/"})}},n))})),r.a.createElement(l.b,{to:"/"},r.a.createElement(f.a,{variant:"outline-secondary"},"Home")))}var O=n(22);function k(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(e.user.username),u=Object(s.a)(l,2),E=u[0],d=u[1],h=Object(a.useState)(e.user.password),g=Object(s.a)(h,2),v=g[0],w=g[1],b=function(){return c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{variant:"outline-secondary",onClick:function(){return c(!0)}},"Edit"),r.a.createElement(O.a,{show:o,onHide:b},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Change info for ",e.user.fName)),r.a.createElement(O.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(p.a.Group,{controlId:"editUserModalUsername"},r.a.createElement(p.a.Control,{type:"text",placeholder:"Enter Username",value:E,onChange:function(e){e.preventDefault(),d(e.target.value)},readOnly:!0})),r.a.createElement(p.a.Group,{controlId:"editUserModalPassword"},r.a.createElement(p.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(e){e.preventDefault(),w(e.target.value)}})))),r.a.createElement(O.a.Footer,null,r.a.createElement(f.a,{variant:"outline-dark",onClick:b},"Cancel"),r.a.createElement(f.a,{variant:"outline-secondary",onClick:function(t){t.preventDefault();try{n="".concat(i).concat(m,"users/").concat(e.user.username),a={username:E,password:v},fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(!e.ok)throw new Error("Error with PUT at ".concat(n));return e.json()})).catch((function(e){throw e})),console.log("updated")}catch(r){console.log(r.message)}var n,a;c(!1),e.refresh()}},"Save Changes"))))}function S(e){return r.a.createElement("div",null,r.a.createElement(w.a,{style:{width:"18rem"}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,null,e.user.username),r.a.createElement(w.a.Text,null,"".concat(e.user.fName," ").concat(e.user.lName)),r.a.createElement(k,{user:e.user,refresh:e.refresh}),r.a.createElement(f.a,{variant:"outline-danger",onClick:function(){var t;(t="".concat(i).concat(m,"users/").concat(e.user.username),e.user,fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Error with DELETE at ".concat(t));return e.json()})).catch((function(e){throw e}))).then((function(t){e.refresh()})).catch((function(e){console.log(e.message)}))}},"Delete"))))}function I(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),o=n[0],c=n[1],l=function(){var e;(e="".concat(i).concat(m,"users"),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Error with GET at ".concat(e));return t.json()})).catch((function(e){throw e}))).then((function(e){c(e)})).catch((function(e){console.log(e)}))};return Object(a.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),o.map((function(e){return r.a.createElement(S,{key:e._id,user:e,refresh:l})})))}function P(){return r.a.createElement(d,null,r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/signup",component:v}),r.a.createElement(u.b,{path:"/login",component:g}),r.a.createElement(u.b,{path:"/forgot",component:y}),r.a.createElement(j,{path:"/admin",component:I}),r.a.createElement(u.b,{path:"/",component:b}))))}var T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.37f673db.chunk.js.map